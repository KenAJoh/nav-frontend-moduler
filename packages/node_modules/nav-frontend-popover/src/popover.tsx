import * as React from 'react';
import * as PT from 'prop-types';
import * as classnames from 'classnames';
import { Manager, Reference, Popper, PopperProps, PopperArrowProps } from 'react-popper';

import 'nav-frontend-popover-style';

export interface PopoverProps {
    /**
     * Egendefinert klassenavn.
     */
    className?: string;
    /**
     * Rendrer en popover uten pil og uten margin til
     */
    utenPil?: boolean;
    /**
     * 
     */
    pilProps?: Partial<PopperArrowProps>;
    /**
     * 
     */
    innerRef?: () => any;
    /**
     * 
     */
    orientering?: 'top' | 'bottom' ;
}

const popoverCls = (props) => classnames('popover', props.className, {
    'popover--utenPil': props.utenPil
});

class Popover extends React.Component<PopoverProps> {
    render() {
        const { children, className, utenPil, pilProps, innerRef, ...rest } = this.props;
        return (
            <div
                className={popoverCls(this.props)}
                ref={innerRef}
                {...rest}
            >
                {children}
                {
                    !utenPil &&
                    <div ref={pilProps.ref} style={pilProps.style} />
                }
            </div>
        );
    }
}

(Popover as React.ComponentClass).propTypes = {
    /**
     * Egendefinert klassenavn.
     */
    className: PT.string
};

export default Popover;
export { Manager, Reference, Popper };
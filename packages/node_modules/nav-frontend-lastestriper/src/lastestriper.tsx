import * as React from 'react';
import * as PT from 'prop-types';
import 'nav-frontend-lastestriper-style';
import * as classNames from 'classnames';

const cls = (className) => classNames('nav-frontend-lastestriper', className);

export interface NavFrontendLastestriperProps extends React.HTMLAttributes<HTMLDivElement> {
    /**
     * Antall lastestriper. Default er 3.
     */
    linjer: number;
}

class NavFrontendLastestriper extends React.Component<NavFrontendLastestriperProps, {}> {

    static defaultProps = {
        linjer: 3
    };

    genererStriper(linjer: number): React.ReactNode[] {
        return Array(linjer)
            .fill(0)
            .map((_, indeks: number) => {
                const idx = indeks % 3;
                if (idx === 0) {
                    return <div className="lastestripe" key={indeks}/>;
                }
                if (idx === 1) {
                    return <div className="lastestripe lastestripe__kort_forsinkelse" key={indeks}/>;
                }
                return <div className="lastestripe lastestripe__lang_forsinkelse lastestripe__smal" key={indeks}/>;
            });
    }

    render(): JSX.Element {
        const { linjer, style, className } = this.props;
        return (
            <div className={cls(className)} style={style}>
                {this.genererStriper(linjer)}
            </div>
        );
    }
}

(NavFrontendLastestriper as React.ComponentClass).propTypes = {
    /**
     * Antall lastestriper. Default er 3.
     */
    linjer: PT.number,
};

export default NavFrontendLastestriper;
